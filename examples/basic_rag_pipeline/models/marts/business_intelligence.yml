schema:
  - model_name: business_intelligence
    description: "Cross KPIs (Sales, Finance, Stocks)."
    
    config:
      materialized: table
      version: 1
      latest: true
      status: active
      tech_owner: "bi_team@verity.com"
      business_owner: "management@verity.com"
      security_level: confidential
      data_contract: true        # model is a data contract
      data_catalog: true         # model is published in the Data Catalog

    
    compliance:
      pre_flight:
        - check: strict_schema_validation
          severity: error
      post_flight:
        - check: row_count_anomaly
          threshold: 0.05        # test row count deviation

    columns:
      - name: customer_id
        description: "Unique customer identifier."
        tests:
          - unique
          - not_null
      - name: total_orders
        description: "Total number of orders made by the customer."
      - name: lifetime_value
        description: "Total revenue generated by the customer."
      - name: total_finance_volume
        description: "Total finance volume (sum of transactions)."
      - name: total_active_promotions
        description: "Number of active promotions."
      - name: total_employees
        description: "Total number of employees in the company."
      - name: avg_salary_band
        description: "Average salary band."
      - name: total_products
        description: "Total number of distinct products in stock."
      - name: total_stock
        description: "Total stock volume."
